var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,l=(e,t)=>{for(var a in t||(t={}))n.call(t,a)&&r(e,a,t[a]);if(s)for(var a of s(t))o.call(t,a)&&r(e,a,t[a]);return e};import{o as i,c as u,r as c,w as d,a as m,t as p,b as h,d as f,e as g,f as v,g as y,h as b,F as w,p as k,i as S,j as C,v as $,m as U,k as D,l as _,n as x,T as A,V as P,s as O,q as T,u as q,_ as H,A as E,x as F}from"./vendor.c3bc269b.js";const B={name:"App",methods:{async onAuthStateChanged(e){e&&await this.fetchUserData()}}};B.render=function(e,t,a,s,n,o){const r=c("router-view");return i(),u(r)};const L={};L.render=function(e,t){const a=c("router-view"),s=c("lo-default");return i(),u(s,null,{default:d((()=>[m(a)])),_:1})};const j={name:"AuthLoginRegisterForm",props:{title:String,res:Object},data:()=>({xdata:{type:"",message:""},prompt:!1}),methods:{submit(e){const t={},a=e.srcElement.getElementsByTagName("input");for(let s=0;s<a.length;s++)if("submit"!=a[s].type){const e=a[s].name,n=a[s].value;t[e]=n}this.prompt=!1,this.$emit("onSubmit",t)},resHandler(e){this.xdata=e,this.prompt=!0,window.scrollTo({top:0,behavior:"smooth"})}},watch:{res:{handler:"resHandler",immediate:!0}}},V={class:"p-auth"},R={key:0,class:"prompts"},I={class:"inputs"},N=m("hr",null,null,-1),W={class:"notes"};j.render=function(e,t,a,s,n,o){return i(),u("div",V,[m("h1",null,p(a.title),1),m("form",{onSubmit:t[2]||(t[2]=g(((...e)=>o.submit&&o.submit(...e)),["prevent"]))},[a.res&&a.res.type?(i(),u("div",R,[m("div",{type:a.res.type,class:e.prompt?"":"out"},[m("div",null,p(a.res.message),1),m("i",{class:"fa fa-times-circle",onClick:t[1]||(t[1]=t=>e.prompt=!1),"aria-hidden":"true"})],10,["type"])])):h("",!0),m("div",I,[f(e.$slots,"form")])],32),N,m("div",W,[f(e.$slots,"notes")])])};const M={components:{AuthForm:j},data:()=>({loading:!1,serv:{type:"",message:""}}),methods:{onAuthStateChanged(e){e&&this.$router.push("/home")}}},z=m("div",null,[m("label",null,"Username"),m("input",{type:"text",name:"user",autocomplete:"email",required:""})],-1),G=m("div",null,[m("label",null,"Password"),m("input",{type:"password",name:"pass",autocomplete:"",required:""})],-1),Y={type:"submit",value:"Authenticate"},J=b(" By logging in, you agree to our "),K=b("Terms and Agreements"),Q=b(" Do not have an account? "),X=b("Register");M.render=function(e,t,a,s,n,o){const r=c("router-link"),l=c("auth-form"),p=v("btnload");return i(),u(l,{title:"Login",onOnSubmit:e.authFormLogin,res:e.serv},{form:d((()=>[z,G,m("div",null,[y(m("button",Y,null,512),[[p,e.loading]])])])),notes:d((()=>[m("p",null,[J,m(r,{to:"/"},{default:d((()=>[K])),_:1})]),m("p",null,[Q,m(r,{to:"/register"},{default:d((()=>[X])),_:1})])])),_:1},8,["onOnSubmit","res"])};const Z={components:{AuthForm:j},data:()=>({loading:!1,serv:{type:"",message:""}}),methods:{onAuthStateChanged(e){e&&this.$router.push("/home")}}},ee=m("div",null,[m("label",null,"Name"),m("input",{type:"text",name:"name",required:""})],-1),te=m("div",null,[m("label",null,"Username"),m("input",{type:"text",name:"user",required:""})],-1),ae=m("div",null,[m("label",null,"Email"),m("input",{type:"email",name:"email",required:""})],-1),se=m("div",null,[m("label",null,"Phone"),m("input",{type:"tel",name:"phone",required:""})],-1),ne=m("div",null,[m("label",null,"Password"),m("input",{type:"password",name:"pass",autocomplete:"",required:""})],-1),oe=m("div",null,[m("label",null,"Confirm Password"),m("input",{type:"password",name:"cpass",autocomplete:"",required:""})],-1),re={type:"submit",value:"Create Account"},le=b(" By creating an account, you agree to our "),ie=b("Terms and Agreements"),ue=b(" Already have an account? "),ce=b("Login");Z.render=function(e,t,a,s,n,o){const r=c("router-link"),l=c("auth-form"),p=v("btnload");return i(),u(l,{title:"Register",onOnSubmit:e.authFormRegister,res:e.serv},{form:d((()=>[ee,te,ae,se,ne,oe,m("div",null,[y(m("button",re,null,512),[[p,e.loading]])])])),notes:d((()=>[m("p",null,[le,m(r,{to:"/"},{default:d((()=>[ie])),_:1})]),m("p",null,[ue,m(r,{to:"/login"},{default:d((()=>[ce])),_:1})])])),_:1},8,["onOnSubmit","res"])};const de={methods:{logoutBtn(){this.resetStore(),this.$router.push("/")},cancelBtn(){this.$router.go(-1)}}};de.render=function(e,t,a,s,n,o){const r=c("confirm-dialog");return i(),u(r,{title:"Logout",message:"Are you sure you want to logout?",onOnConfirm:o.logoutBtn,onOnClose:o.cancelBtn,onOnCancel:o.cancelBtn},null,8,["onOnConfirm","onOnClose","onOnCancel"])};const me={};me.render=function(e,t){const a=c("router-view"),s=c("lo-user");return i(),u(s,null,{default:d((()=>[m(a)])),_:1})};const pe={},he=m("h1",null,"Home sweet home",-1),fe=m("p",null,"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Accusantium nesciunt iure suscipit cupiditate magni voluptatibus quod ab quisquam impedit adipisci esse laboriosam, error vel cumque est earum officia quae. Eius repellat eum, nesciunt magni, eos quia reiciendis, a praesentium hic ab exercitationem deserunt minima repudiandae consequuntur vero error. Totam at, culpa, dolorem ab distinctio porro animi, voluptate quo id molestias inventore ratione? Accusantium esse cum, aperiam animi maiores excepturi enim. Laboriosam placeat voluptas tempore facilis rem veritatis sequi quae possimus.",-1);pe.render=function(e,t){const a=c("wf1-sidebar-item"),s=c("wf1-sidebar"),n=c("wf1-main");return i(),u(w,null,[m(s,null,{default:d((()=>[m(a,{to:"/home",icon:"fa fa-home",name:"Home"})])),_:1}),m(n,null,{default:d((()=>[he,fe])),_:1})],64)};const ge={methods:{async onAuthStateChanged(e){e||this.$router.push("/")}}};ge.render=function(e,t,a,s,n,o){const r=c("wf1-sidebar-item"),l=c("wf1-sidebar"),p=c("router-view"),h=c("wf1-main");return i(),u(w,null,[m(l,null,{default:d((()=>[m(r,{to:"/settings",icon:"fa fa-user-circle",name:"Profile"}),m(r,{to:"/settings/bindings",icon:"fa fa-chain",name:"Bindings"}),m(r,{to:"/settings/password",icon:"fa fa-key",name:"Password"})])),_:1}),m(h,null,{default:d((()=>[m(p)])),_:1})],64)};const ve={props:{ConfirmText:{type:String,default:"Confirm"},CancelText:{type:String,default:"Cancel"},title:{type:String,default:"Confirm"},message:{type:String,default:"Are you sure?"}},data:()=>({dialog:!0}),methods:{closeDialog(){this.$emit("onClose"),this.dialog=!1}}},ye=C("data-v-39e33d4a");k("data-v-39e33d4a");const be={key:0,class:"dialog-container"},we={class:"dialog"},ke={class:"header"},Se={class:"body"};S();const Ce=ye(((e,t,a,s,n,o)=>e.dialog?(i(),u("dialog",be,[m("div",we,[f(e.$slots,"header",{},(()=>[m("div",ke,[m("span",null,p(a.title),1),m("i",{class:"fa fa-times",onClick:t[1]||(t[1]=(...e)=>o.closeDialog&&o.closeDialog(...e))})])]),{}),f(e.$slots,"default",{},(()=>[m("div",Se,p(a.message),1)]),{})])])):h("",!0)));ve.render=Ce,ve.__scopeId="data-v-39e33d4a";const $e={name:"SettingsUpdateProfileBaseForm",components:{CustomDialog:ve},props:{loading:Boolean},created(){this.formID=Date.now()},data:()=>({formID:"",pass:"",dialog:!1}),methods:{submit(e){const t={},a=(()=>document.querySelector("#cd-"+this.formID).querySelectorAll("input"))();this.dialog=!1;for(let s=0;s<a.length;s++)if("submit"!=a[s].type){const e=a[s].name,n=a[s].value;t[e]=n}this.$emit("onSubmit",t)}}},Ue={class:"c-retype-pass"},De=m("div",{class:"message"}," You must re-enter your current password to proceed. ",-1),_e={class:"diag-form"},xe=m("label",null,"Current Password",-1),Ae={class:"inputs-container"};$e.render=function(e,t,a,s,n,o){const r=c("custom-dialog"),l=v("btnload");return i(),u("form",{class:"form-container",onSubmit:t[4]||(t[4]=g((t=>e.dialog=!0),["prevent"])),id:`cd-${e.formID}`},[e.dialog?(i(),u(r,{key:0,onOnClose:t[3]||(t[3]=t=>e.dialog=!1),title:"Checkpoint"},{default:d((()=>[m("div",Ue,[De,m("div",_e,[xe,y(m("input",{type:"password",name:"pass","onUpdate:modelValue":t[1]||(t[1]=t=>e.pass=t)},null,512),[[$,e.pass]]),y(m("button",{type:"submit",value:"Submit",onClick:t[2]||(t[2]=(...e)=>o.submit&&o.submit(...e))},null,512),[[l,a.loading]])])])])),_:1})):h("",!0),m("div",Ae,[f(e.$slots,"default")])],40,["id"])};const Pe={name:"SettingsEditProfileForm",components:{BaseForm:$e},data:()=>({loading:!1,odata:{},data:{name:"",user:""},serv:{type:"",message:""}}),computed:l({},U(["userdata","userdataState"])),methods:{check(e){e=this.$tuos.auth.filterUpdateData(this.odata,e),this.loading=!0,this.$tuos.auth.update(e).then((e=>{this.serv=e})).catch((e=>{this.serv=e})).finally((async()=>{await this.fetchUserData(),this.loading=!1}))},userdataHandler(e){this.odata=e,this.data.user=e.user,this.data.name=e.name}},watch:{userdata:{handler:"userdataHandler",immediate:!0}}},Oe=m("label",null,"Name",-1),Te=m("label",null,"Username",-1),qe={type:"submit",value:"SAVE"};Pe.render=function(e,t,a,s,n,o){const r=c("server-response-handler"),l=c("base-form"),p=c("userdata-skeleton-loader"),f=v("btnload");return i(),u(w,null,["success"==e.userdataState?(i(),u(l,{key:0,onOnSubmit:o.check,res:e.serv},{default:d((()=>[Oe,y(m("input",{type:"text",name:"name","onUpdate:modelValue":t[1]||(t[1]=t=>e.data.name=t),disabled:e.loading},null,8,["disabled"]),[[$,e.data.name]]),Te,y(m("input",{type:"text",name:"user","onUpdate:modelValue":t[2]||(t[2]=t=>e.data.user=t),disabled:e.loading},null,8,["disabled"]),[[$,e.data.user]]),m(r,{res:e.serv},null,8,["res"]),y(m("button",qe,null,512),[[f,e.loading]])])),_:1},8,["onOnSubmit","res"])):h("",!0),m(p,{"extend-class":"auto-container"})],64)};const He={components:{EpForm:Pe}},Ee=m("div",{class:"title"},"Edit Profile",-1);He.render=function(e,t,a,s,n,o){const r=c("ep-form");return i(),u("div",null,[Ee,m(r)])};const Fe={name:"SettingsEditProfileForm",components:{BaseForm:$e},data:()=>({loading:!1,serv:{type:"",message:""}}),computed:l({},U(["userdata","userdataState"])),methods:{check(e){e.npass!=e.cnpass||e.npass.length<6?this.serv={type:"error",message:"Invalid"}:(e=this.$tuos.auth.filterUpdatePasswordData(e),this.loading=!0,this.$tuos.auth.update(e).then((e=>{this.serv=e})).catch((e=>{this.serv=e})).finally((async()=>{this.loading=!1})))}}},Be=m("label",null,"New Password",-1),Le=m("label",null,"Confirm New Password",-1),je={type:"submit",value:"SAVE"};Fe.render=function(e,t,a,s,n,o){const r=c("server-response-handler"),l=c("base-form"),p=c("userdata-skeleton-loader"),f=v("btnload");return i(),u(w,null,["success"==e.userdataState?(i(),u(l,{key:0,onOnSubmit:o.check,res:e.serv},{default:d((()=>[Be,m("input",{type:"password",name:"npass",disabled:e.loading},null,8,["disabled"]),Le,m("input",{type:"password",name:"cnpass",disabled:e.loading},null,8,["disabled"]),m(r,{res:e.serv},null,8,["res"]),y(m("button",je,null,512),[[f,e.loading]])])),_:1},8,["onOnSubmit","res"])):h("",!0),m(p,{"extend-class":"auto-container"})],64)};const Ve={components:{CpForm:Fe}},Re=m("div",{class:"title"},"Change Account Password",-1);Ve.render=function(e,t,a,s,n,o){const r=c("cp-form");return i(),u("div",null,[Re,m(r)])};const Ie={name:"SettingsEditProfileForm",components:{BaseForm:$e},data:()=>({loading:!1,odata:{},data:{email:"",phone:""},serv:{type:"",message:""}}),computed:l({},U(["userdata","userdataState"])),methods:{check(e){e=this.$tuos.auth.filterUpdateData(this.odata,e),this.loading=!0,this.$tuos.auth.update(e).then((e=>{this.serv=e})).catch((e=>{this.serv=e})).finally((async()=>{await this.fetchUserData(),this.loading=!1}))},userdataHandler(e){this.odata=e,this.data.email=e.email,this.data.phone=e.phone}},watch:{userdata:{handler:"userdataHandler",immediate:!0}}},Ne=m("label",null,"Email",-1),We=m("label",null,"Phone",-1),Me={type:"submit",value:"SAVE"};Ie.render=function(e,t,a,s,n,o){const r=c("server-response-handler"),l=c("base-form"),p=c("userdata-skeleton-loader"),f=v("btnload");return i(),u(w,null,["success"==e.userdataState?(i(),u(l,{key:0,onOnSubmit:o.check,res:e.serv},{default:d((()=>[Ne,y(m("input",{type:"email",name:"email","onUpdate:modelValue":t[1]||(t[1]=t=>e.data.email=t),disabled:e.loading},null,8,["disabled"]),[[$,e.data.email]]),We,y(m("input",{type:"tel",name:"phone","onUpdate:modelValue":t[2]||(t[2]=t=>e.data.phone=t),disabled:e.loading},null,8,["disabled"]),[[$,e.data.phone]]),m(r,{res:e.serv},null,8,["res"]),y(m("button",Me,null,512),[[f,e.loading]])])),_:1},8,["onOnSubmit","res"])):h("",!0),m(p,{"extend-class":"auto-container"})],64)};const ze={components:{AbForm:Ie}},Ge=m("div",{class:"title"},"Account Bindings",-1);ze.render=function(e,t,a,s,n,o){const r=c("ab-form");return i(),u("div",null,[Ge,m(r)])};const Ye={name:"UserProfileGroup",async created(){await this.fetchCurUserData()},computed:l({},U(["curUserDataState"]))};Ye.render=function(e,t,a,s,n,o){const r=c("wf1-sidebar-item"),l=c("wf1-sidebar"),p=c("router-view"),f=c("skeleton-loader"),g=c("wf1-main");return i(),u(w,null,["success"==e.curUserDataState?(i(),u(l,{key:0},{default:d((()=>[m(r,{to:`/user/@${e.$router.currentRoute.value.params.user}/about`,icon:"fa fa-user-circle",name:"About"},null,8,["to"])])),_:1})):h("",!0),m(g,null,{default:d((()=>["success"==e.curUserDataState?(i(),u(p,{key:0})):h("",!0),"fetching"==e.curUserDataState?(i(),u(f,{key:1,height:"300px"})):h("",!0)])),_:1})],64)};const Je={name:"UserAboutCard",props:{extendClass:{type:String,default:""}}},Ke={class:"key"},Qe={class:"value"};Je.render=function(e,t,a,s,n,o){return i(),u("div",{class:`c-user-about ${a.extendClass}`},[(i(!0),u(w,null,D(e.$store.state.curUserData,((e,t)=>(i(),u("div",{class:"row",key:t},[m("div",Ke,p(t.replace("_","")),1),m("div",Qe,p(e),1)])))),128))],2)};const Xe={components:{UserAboutCard:Je}},Ze=m("div",{class:"title"},"About Profile",-1);Xe.render=function(e,t,a,s,n,o){const r=c("user-about-card");return i(),u("div",null,[Ze,m(r,{"extend-class":"auto-container"})])};const et=_({history:x(),routes:[{path:"/",component:L,children:[{path:"",component:M},{path:"login",component:M},{path:"register",component:Z},{path:"logout",component:de}]},{path:"/user",component:me,children:[{path:"@:user",component:Ye,children:[{path:"about",alias:"",component:Xe}]},{path:"/home",component:pe},{path:"/settings",component:ge,children:[{path:"",component:He},{path:"bindings",component:ze},{path:"password",component:Ve}]}]}]}),tt={name:"defaultLayout"},at={class:"lo-default"};tt.render=function(e,t,a,s,n,o){return i(),u("div",at,[f(e.$slots,"default")])};const st={name:"layoutUser"};st.render=function(e,t,a,s,n,o){const r=c("wf1-header"),l=c("wf1-container");return i(),u(w,null,[m(r),m(l,null,{default:d((()=>[f(e.$slots,"default")])),_:3})],64)};var nt={install:e=>{e.component("lo-default",tt),e.component("lo-user",st)}};const ot={props:{ConfirmText:{type:String,default:"Confirm"},CancelText:{type:String,default:"Cancel"},title:{type:String,default:"Confirm"},message:{type:String,default:"Are you sure?"}},data:()=>({dialog:!0}),methods:{closeDialog(){this.$emit("onClose"),this.dialog=!1},cancelDialog(){this.$emit("onCancel"),this.dialog=!1},confirmDialog(){this.$emit("onConfirm"),this.dialog=!1}}},rt={key:0,class:"c-confirm-dialog-container"},lt={class:"dialog"},it={class:"title"},ut={class:"message"},ct={class:"actions"};ot.render=function(e,t,a,s,n,o){return e.dialog?(i(),u("dialog",rt,[m("div",lt,[m("div",it,[m("span",null,p(a.title),1),m("button",{onClick:t[1]||(t[1]=(...e)=>o.cancelDialog&&o.cancelDialog(...e))},"x")]),m("div",ut,p(a.message),1),m("div",ct,[m("button",{onClick:t[2]||(t[2]=(...e)=>o.cancelDialog&&o.cancelDialog(...e))},p(a.CancelText),1),m("button",{onClick:t[3]||(t[3]=(...e)=>o.confirmDialog&&o.confirmDialog(...e))},p(a.ConfirmText),1)])])])):h("",!0)};const dt={name:"SkeletonLoader",props:{extendClass:{type:String,default:""},height:{type:String,default:"5em"}},data:()=>({h:!0,sh:!0,c:!0,b:!0})},mt={class:"top"},pt={key:0,class:"h"},ht={key:1,class:"sh"};dt.render=function(e,t,a,s,n,o){return i(),u("div",{class:`skeleton-loader${e.c?" skeleton-container":""} ${a.extendClass}`},[m("div",mt,[e.h?(i(),u("div",pt)):h("",!0),e.sh?(i(),u("div",ht)):h("",!0)]),e.b?(i(),u("div",{key:0,class:"body",style:`height:${a.height}`},null,4)):h("",!0)],2)};const ft={name:"UserdataSkeletonLoader",props:{extendClass:{extendClass:{type:String,default:""}}},computed:l({},U(["userdataState"]))},gt=m("div",{class:"btn"},[m("i",{class:"fa fa-refresh"}),m("span",null,"Failed to get userdata!"),m("span",null,"Click to fetch userdata again.")],-1);ft.render=function(e,t,a,s,n,o){const r=c("skeleton-loader");return i(),u(w,null,["fetching"==e.userdataState?(i(),u(r,{key:0,"extend-class":a.extendClass},null,8,["extend-class"])):h("",!0),"error"==e.userdataState?(i(),u("div",{key:1,class:`${a.extendClass} fetch-userdata-btn`,onClick:t[1]||(t[1]=(...t)=>e.fetchUserData&&e.fetchUserData(...t))},[gt],2)):h("",!0)],64)};const vt={props:{res:Object,extendClass:{type:String,default:""}},data:()=>({message:"",type:"",prompt:!0}),methods:{resHandler(e){this.message=e.message,this.type=e.type,this.prompt=!0}},watch:{res:{handler:"resHandler",immediate:!0}}};vt.render=function(e,t,a,s,n,o){return e.type?(i(),u("div",{key:0,class:`c-server-response-handler ${a.extendClass}`},[m("div",{type:e.type,class:""+(e.prompt?"":"out")},[m("div",null,p(e.message),1),m("i",{class:"fa fa-times-circle",onClick:t[1]||(t[1]=t=>e.prompt=!1),"aria-hidden":"true"})],10,["type"])],2)):h("",!0)};var yt={install:e=>{e.component("confirm-dialog",ot),e.component("skeleton-loader",dt),e.component("userdata-skeleton-loader",ft),e.component("server-response-handler",vt)}},bt=(e,t)=>{var a;const s=null!=(a=t.value)&&a;e.innerHTML=s?'<i class="fa fa-spinner fa-spin"></i>':e.value,s?e.setAttribute("disabled",!0):e.removeAttribute("disabled")},wt={install:(e,t)=>{e.directive("btnload",bt)}};const kt={name:"Wf1Header",data:()=>({menu:!1})},St={wf1:""},Ct={class:"header"},$t={class:"brand__group"},Ut=m("li",{class:"search"},[m("form",{action:"/search"},[m("input",{type:"text",placeholder:"Search",name:"q"}),m("button",{type:"submit"},[m("i",{class:"fa fa-search"})])])],-1),Dt={class:"main__navi"},_t=m("i",{class:"fa fa-home"},null,-1),xt=m("i",{class:"fa fa-cog"},null,-1),At=m("i",{class:"fa fa-caret-down"},null,-1),Pt={class:"menu-content"},Ot={class:"match-width"},Tt={class:"items"},qt=m("i",{class:"fa fa-user-circle"},null,-1),Ht=m("span",null,"Profile",-1),Et=m("i",{class:"fa fa-sign-out"},null,-1),Ft=m("span",null,"Logout",-1);kt.render=function(e,t,a,s,n,o){const r=c("router-link");return i(),u(A,{to:"#header"},[m("header",St,[m("div",Ct,[f(e.$slots,"default",{},(()=>[m("ul",$t,[m("li",{class:"title",onClick:t[1]||(t[1]=(...t)=>e.gotoHome&&e.gotoHome(...t))},"Tuos"),Ut]),m("ul",Dt,[m("li",null,[m(r,{to:"/home",onClick:t[2]||(t[2]=t=>e.menu=!1)},{default:d((()=>[_t])),_:1})]),m("li",null,[m(r,{to:"/settings",onClick:t[3]||(t[3]=t=>e.menu=!1)},{default:d((()=>[xt])),_:1})]),m("li",null,[m("div",{class:"menu",active:e.menu},[m("a",{href:"#",class:"toggle-menu",onClick:t[4]||(t[4]=t=>e.menu=!e.menu)},[At]),m("div",Pt,[m("div",Ot,[m("div",Tt,["success"==e.$store.state.userdataState?(i(),u(r,{key:0,to:`/user/@${e.$store.state.userdata.user}`,class:"item",onClick:t[5]||(t[5]=t=>e.menu=!e.menu)},{default:d((()=>[qt,Ht])),_:1},8,["to"])):h("",!0),m(r,{to:"/logout",class:"item"},{default:d((()=>[Et,Ft])),_:1})])])])],8,["active"])])])]))])])])};const Bt={name:"Wf1Content"},Lt={"wf1-container":""},jt={class:"main"},Vt={class:"content"};Bt.render=function(e,t,a,s,n,o){return i(),u("div",Lt,[m("div",jt,[m("div",Vt,[f(e.$slots,"default")])])])};const Rt={name:"Wf1SidebarItem",props:{to:String|Object,icon:{type:String,default:"fa fa-home"},name:{type:String,default:"Link"}}};Rt.render=function(e,t,a,s,n,o){const r=c("router-link");return i(),u(r,{to:a.to},{default:d((()=>[f(e.$slots,"default",{},(()=>[m("i",{class:a.icon},null,2),m("span",null,p(a.name),1)]))])),_:3},8,["to"])};const It={},Nt={class:"sidebar"};It.render=function(e,t){return i(),u("div",Nt,[f(e.$slots,"default")])};const Wt={name:"Wf1Main"},Mt={class:"main-activity"};Wt.render=function(e,t,a,s,n,o){return i(),u("div",Mt,[f(e.$slots,"default")])};const zt={name:"Wf1"},Gt={class:"lo-user-container","lo-user":""},Yt={class:"header"},Jt={class:"brand__group"},Kt=m("li",{class:"search"},[m("form",{action:""},[m("input",{type:"text",placeholder:"Search",name:"q"}),m("button",{type:"submit"},[m("i",{class:"fa fa-search"})])])],-1),Qt={class:"main__navi"},Xt=m("i",{class:"fa fa-home"},null,-1),Zt=m("i",{class:"fa fa-cog"},null,-1),ea=m("i",{class:"fa fa-caret-down"},null,-1),ta={class:"menu-content"},aa={class:"match-width"},sa={class:"items"},na=m("i",{class:"fa fa-user-circle"},null,-1),oa=m("span",null,"Profile",-1),ra=m("i",{class:"fa fa-sign-out"},null,-1),la=m("span",null,"Logout",-1),ia={class:"lo-user-container"},ua={class:"main"};zt.render=function(e,t,a,s,n,o){const r=c("router-link");return i(),u(w,null,[(i(),u(A,{to:"#header"},[m("header",Gt,[m("div",Yt,[m("ul",Jt,[m("li",{class:"title",onClick:t[1]||(t[1]=(...t)=>e.gotoHome&&e.gotoHome(...t))},"Tuos"),Kt]),m("ul",Qt,[m("li",null,[m(r,{to:"/home",onClick:t[2]||(t[2]=t=>e.menu=!1)},{default:d((()=>[Xt])),_:1})]),m("li",null,[m(r,{to:"/settings",onClick:t[3]||(t[3]=t=>e.menu=!1)},{default:d((()=>[Zt])),_:1})]),m("li",null,[m("div",{class:"menu",active:e.menu},[m("a",{href:"#",class:"toggle-menu",onClick:t[4]||(t[4]=t=>e.menu=!e.menu)},[ea]),m("div",ta,[m("div",aa,[m("div",sa,[m(r,{to:"/me",class:"item",onClick:t[5]||(t[5]=t=>e.menu=!e.menu)},{default:d((()=>[na,oa])),_:1}),m(r,{to:"/logout",class:"item"},{default:d((()=>[ra,la])),_:1})])])])],8,["active"])])])])])])),m("div",ia,[m("div",ua,[f(e.$slots,"default")])])],64)};var ca={install:e=>{e.component("wf1-header",kt),e.component("wf1-container",Bt),e.component("wf1-sidebar-item",Rt),e.component("wf1-sidebar",It),e.component("wf1-main",Wt),e.component("wf1",zt)}},da={install:(e,t)=>{e.use(ca)}};const ma=new P({storage:window.localStorage}),pa=O.get("vuex")||{},ha={accessToken:"",authenticated:!1,userdataState:"error",userdata:{_id:"",user:"",name:"",email:"",phone:""},curUserData:{_id:"",user:"",name:""},curUserDataState:"error"};var fa={store:T({plugins:[q(),ma.plugin],state:(()=>{const e={};for(let t in ha)e[t]=pa[t]||ha[t];return e})(),mutations:(()=>{const e={};for(let t in ha)e[t]=(e,a)=>{e[t]=a};return e})()}),state:ha};var ga={proto:function(e){const{host:t}=e,a=()=>"Bearer "+(O.get("vuex").accessToken||""),s={login:"/api/auth/login",register:"/api/auth/register",user:"/api/user",users:"/api/users"},n=e=>t+s[e];return{login:async(e={})=>{const t={method:"POST",url:n("login"),headers:{"content-type":"application/json"},data:e};return await E.request(t).then((e=>e.data)).catch((()=>({type:"error",message:"Unknown error occur."})))},register:async(e={})=>{const t={method:"POST",url:n("register"),headers:{"content-type":"application/json"},data:e};return await E.request(t).then((e=>e.data)).catch((()=>({type:"error",message:"Unknown error occur."})))},userMe:async()=>{const e={method:"GET",url:n("user"),headers:{authorization:a()}};return await E.request(e).then((e=>e.data)).catch((e=>({type:"error",message:"Unknown error occur.",e:e})))},userName:async e=>{const t={method:"GET",url:`${n("user")}/@${e}`,headers:{authorization:a()}};return await E.request(t).then((e=>e.data)).catch((e=>({type:"error",message:"Unknown error occur.",e:e})))},update:async(e={})=>{const t={method:"PUT",url:n("user"),headers:{"content-type":"application/json",authorization:a()},data:e};return await E.request(t).then((e=>e.data)).catch((()=>({type:"error",message:"Unknown error occur."})))},filterUpdateData:(e,t)=>{const a={};for(let s in t)String(e[s])!=String(t[s])&&(a[s]=t[s]);return a},filterUpdatePasswordData:e=>H.pick(e,["pass","npass"])}},mixin:{computed:l({},U(["accessToken","authenticated"])),methods:{accessTokenHandler(){},accessTokenValidateChange(e){e&&"string"==typeof e&&e.length>0?this.$store.commit("authenticated",!0):this.$store.commit("authenticated",!1)},onAuthStateChanged(){},resetStore(){O.clearAll();const e=fa.state;for(let t in e)this.$store.commit(t,e[t])},async authFormLogin(e){this.loading=!0,await this.$tuos.auth.login(e).then((e=>{this.serv=e,this.$store.commit("accessToken",e.token)})).catch((()=>this.serv={type:"error",message:"Unknown error occur."})).finally((()=>{this.loading=!1}))},async authFormRegister(e){Boolean(e.pass)&&Boolean(e.cpass)&&e.pass==e.cpass?(this.loading=!0,await this.$tuos.auth.register(H.omit(e,["cpass"])).then((e=>{this.serv=e,this.$store.commit("accessToken",e.token)})).catch((()=>this.serv={type:"error",message:"Unknown error occur."})).finally((()=>{this.loading=!1}))):this.serv={type:"error",message:"Password doesn't match"}},gotoHome(){try{window.location.href="/"}catch{this.$router.push("/")}},async fetchUserData(){return this.$store.commit("userdataState","fetching"),await this.$tuos.auth.userMe().then((e=>{if("error"==e.type)throw Error("Error Server Response");const t=H.pick(e,["user","name","email","_id","phone"]);return this.$store.commit("userdata",t),this.$store.commit("userdataState","success"),t})).catch((e=>{console.error(e),this.$store.commit("userdataState","error")}))},async fetchCurUserData(){return this.$store.commit("curUserDataState","fetching"),await this.$tuos.auth.userName((()=>this.$router.currentRoute.value.params.user)()).then((e=>{if("error"==e.type)throw Error("Error Server Response");const t=H.pick(e,["user","name","_id"]);return this.$store.commit("curUserData",t),this.$store.commit("curUserDataState","success"),t})).catch((e=>{console.error(e),this.$store.commit("curUserDataState","error")}))}},watch:{accessToken:{handler:"accessTokenHandler",immediate:!0},accessToken:{handler:"accessTokenValidateChange",immediate:!0},authenticated:{handler:"onAuthStateChanged",immediate:!0}}}},va={install:(e,s)=>{const n=s.host||"",o=s.devHost||n,r=n;var i;i=l({},s),s=t(i,a({prodHost:n,devHost:o,host:r})),e.config.globalProperties.$tuos={auth:ga.proto(s)},e.mixin(ga.mixin)}};const ya=F(B);ya.use(fa.store),ya.use(et),ya.use(yt),ya.use(nt),ya.use(wt),ya.use(da),ya.use(va,{devHost:"http://localhost:8080"}),ya.mount("#app");
