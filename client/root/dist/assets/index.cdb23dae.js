var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(t,o,a)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,i=(e,t)=>{for(var o in t||(t={}))n.call(t,o)&&r(e,o,t[o]);if(a)for(var o of a(t))s.call(t,o)&&r(e,o,t[o]);return e};import{o as c,c as l,r as d,a as u,b as p,p as h,d as m,e as g,f as v,w as f,V as b,s as _,g as y,h as k,m as w,C as O,i as T}from"./vendor.1318891a.js";const E={name:"App"};let P;E.render=function(e,t,o,a,n,s){const r=d("router-view");return c(),l(r)};const j={},L=function(e,t){if(!t||0===t.length)return e();if(void 0===P){const e=document.createElement("link").relList;P=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in j)return;j[e]=!0;const t=e.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${o}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":P,t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t?new Promise(((e,t)=>{a.addEventListener("load",e),a.addEventListener("error",t)})):void 0}))).then((()=>e()))},A=u({history:p(),routes:[{path:"/",component:()=>L((()=>import("./auth.b923b825.js")),["/assets/auth.b923b825.js","/assets/vendor.1318891a.js"]),children:[{path:"",component:()=>L((()=>import("./Login.3c95b388.js")),["/assets/Login.3c95b388.js","/assets/AuthLoginRegisterForm.9b0fe075.js","/assets/AuthLoginRegisterForm.33e90170.css","/assets/vendor.1318891a.js"])},{path:"login",component:()=>L((()=>import("./Login.3c95b388.js")),["/assets/Login.3c95b388.js","/assets/AuthLoginRegisterForm.9b0fe075.js","/assets/AuthLoginRegisterForm.33e90170.css","/assets/vendor.1318891a.js"])},{path:"register",component:()=>L((()=>import("./Register.6dfb2eee.js")),["/assets/Register.6dfb2eee.js","/assets/AuthLoginRegisterForm.9b0fe075.js","/assets/AuthLoginRegisterForm.33e90170.css","/assets/vendor.1318891a.js"])}]}]});const $={name:"defaultLayout"},H=f("data-v-e2523158");h("data-v-e2523158");const S={class:"lo-default"},V={class:"main"};m();const C=H(((e,t,o,a,n,s)=>(c(),l("div",S,[g("div",V,[v(e.$slots,"default",{},void 0,!0)])]))));$.render=C,$.__scopeId="data-v-e2523158";var I={install:e=>{e.component("lo-default",$)}},D=(e,t)=>{var o;const a=null!=(o=t.value)&&o;e.innerHTML=a?'<i class="fa fa-spinner fa-spin"></i>':e.value,a?e.setAttribute("disabled",!0):e.removeAttribute("disabled")},R={install:(e,t)=>{e.directive("btnload",D)}};const x=new b({storage:window.localStorage}),q=_.get("vuex")||{},U={accessToken:"",authenticated:!1};var F={store:y({plugins:[k(),x.plugin],state:(()=>{const e={};for(let t in U)e[t]=q[t]||U[t];return e})(),mutations:(()=>{const e={};for(let t in U)e[t]=(e,o)=>{e[t]=o};return e})()}),state:U};var M={proto:function(e){const{host:t}=e,o={login:"/api/auth/login",register:"/api/auth/register"};return{login:async(e={})=>{const a={method:"POST",url:(n="login",t+o[n]),headers:{"content-type":"application/json"},data:e};var n;return await O.request(a).then((e=>e.data)).catch((()=>({type:"error",message:"Unknown error occur."})))}}},mixin:{computed:i({},w(["accessToken","authenticated"])),methods:{accessTokenHandler(){},accessTokenValidateChange(e){console.log("validated"),e&&"string"==typeof e&&e.length>0?this.$store.commit("authenticated",!0):this.$store.commit("authenticated",!1)},onAuthStateChanged(){},resetStore(){const e=F.state;for(let t in e)this.$store.commit(t,e[t]);_.clearAll()},async authFormLogin(e){this.loading=!0,await this.$tuos.auth.login(e).then((e=>{this.serv=e,this.$store.commit("accessToken",e.token)})).catch((()=>this.serv={type:"error",message:"Unknown error occur."})).finally((()=>{this.loading=!1}))}},watch:{accessToken:{handler:"accessTokenHandler",immediate:!0},accessToken:{handler:"accessTokenValidateChange",immediate:!0},authenticated:{handler:"onAuthStateChanged",immediate:!0}}}},W={install:(e,a)=>{const n=a.host||"",s=a.devHost||n,r=n;var c;c=i({},a),a=t(c,o({prodHost:n,devHost:s,host:r})),e.config.globalProperties.$tuos={auth:M.proto(a)},e.mixin(M.mixin)}};const z=T(E);z.use(F.store),z.use(A),z.use(I),z.use(R),z.use(W,{devHost:"http://localhost:8080"}),z.mount("#app");
